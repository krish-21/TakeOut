(this.webpackJsonptakeout=this.webpackJsonptakeout||[]).push([[0],[,,function(e,t,a){e.exports={title:"Cart_title__IWES8","cart-items":"Cart_cart-items__2pjQw","empty-text":"Cart_empty-text__1Lvem","orange-text":"Cart_orange-text__5RIIW",total:"Cart_total__3pLin",actions:"Cart_actions__1GOmr","button-alt":"Cart_button-alt__2s6rq",button:"Cart_button__fw1-t","req-text":"Cart_req-text__1CgjC","req-text-loading":"Cart_req-text-loading__203N2","req-text-success":"Cart_req-text-success__3NKjq","req-text-failure":"Cart_req-text-failure__QEbqw","req-text-retry":"Cart_req-text-retry__2l7GJ"}},,function(e,t,a){e.exports={title:"Checkout_title__2u71E",form:"Checkout_form__26gr1",control:"Checkout_control__2qGfb",actions:"Checkout_actions__2X_6_","button-alt":"Checkout_button-alt__RnkC7",submit:"Checkout_submit__2BFZZ",invalid:"Checkout_invalid__2gAN9"}},,function(e,t,a){e.exports={"cart-item":"CartItem_cart-item__1B1_q",summary:"CartItem_summary__3FMDj",amount:"CartItem_amount__jUKEC",price:"CartItem_price__2Nl0j",actions:"CartItem_actions__UwVPJ","inc-button":"CartItem_inc-button__xrkCo","dec-button":"CartItem_dec-button__25QnX"}},,function(e,t,a){e.exports={button:"HeaderCartButton_button__3CMOT",icon:"HeaderCartButton_icon__9KWtg",badge:"HeaderCartButton_badge__1Z3gL",bump:"HeaderCartButton_bump__3atD4","cart-text":"HeaderCartButton_cart-text__2Vr2k"}},,,function(e,t,a){e.exports={"green-title":"Header_green-title__rE5SI","main-img":"Header_main-img__1rqjm","big-title":"Header_big-title__3hRsN"}},,,function(e,t,a){e.exports={backdrop:"Modal_backdrop__1mfF6",modal:"Modal_modal__4DXUe","slide-down":"Modal_slide-down__W3MdX"}},function(e,t,a){e.exports={food:"AvailableFood_food__35M2b","food-appear":"AvailableFood_food-appear__1Wijq","food-loading":"AvailableFood_food-loading__MbmIQ","food-error":"AvailableFood_food-error__38VRS"}},function(e,t,a){e.exports={"food-item":"FoodItem_food-item__2z3uE",description:"FoodItem_description__38xO_",price:"FoodItem_price__3FWUb"}},,function(e,t,a){e.exports={summary:"TaglineCard_summary__3Sm2P","green-title":"TaglineCard_green-title__3F0-M"}},function(e,t,a){e.exports={input:"Input_input__2swPp",label:"Input_label__3uKZ0"}},,function(e,t,a){e.exports={card:"Card_card__1m44e"}},function(e,t,a){e.exports={form:"FoodItemForm_form__2V9O8"}},,,,,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(9),r=a.n(c),s=(a(27),a(3)),o=a(20),i=a(5),l=Object(n.createContext)({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}}),d=a(0),u={items:[],totalAmount:0},j=function(e,t){switch(t.type){case"ADD_ITEM":var a,n=e.totalAmount+t.payload.price*t.payload.amount,c=e.items.findIndex((function(e){return e.id===t.payload.id})),r=e.items[c];if(r){var s=Object(i.a)(Object(i.a)({},r),{},{amount:r.amount+t.payload.amount});(a=Object(o.a)(e.items))[c]=s}else a=e.items.concat(t.payload);return{items:a,totalAmount:n};case"REMOVE_ITEM":var l,d=e.items.findIndex((function(e){return e.id===t.payload})),j=e.items[d],m=e.totalAmount-j.price;if(!(m<0)||(m=0),1===j.amount)l=e.items.filter((function(e){return e.id!==t.payload}));else{var b=Object(i.a)(Object(i.a)({},j),{},{amount:j.amount-1});(l=Object(o.a)(e.items))[d]=b}return{items:l,totalAmount:m};case"CLEAR_CART":return u;default:return e}},m=function(e){var t=Object(n.useReducer)(j,u),a=Object(s.a)(t,2),c=a[0],r=a[1],o={items:c.items,totalAmount:c.totalAmount,addItem:function(e){r({type:"ADD_ITEM",payload:e})},removeItem:function(e){r({type:"REMOVE_ITEM",payload:e})},clearCart:function(){r({type:"CLEAR_CART"})}};return Object(d.jsx)(l.Provider,{value:o,children:e.children})},b=a.p+"static/media/food-table.69f83e2b.jpeg",h=a(11),x=a.n(h),O=function(){return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(d.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},_=a(8),p=a.n(_),f=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],r=a[1],o=Object(n.useContext)(l).items.reduce((function(e,t){return e+t.amount}),0),i="".concat(p.a.button," ").concat(c&&p.a.bump);return Object(n.useEffect)((function(){if(o){r(!0);var e=setTimeout((function(){r(!1)}),300);return function(){clearTimeout(e)}}}),[o]),Object(d.jsxs)("button",{className:i,onClick:e.onClick,children:[Object(d.jsx)("span",{className:p.a.icon,children:Object(d.jsx)(O,{})}),Object(d.jsx)("span",{className:p.a["cart-text"],children:"Cart"}),Object(d.jsx)("span",{className:p.a.badge,children:o})]})},C=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{className:x.a.header,children:[Object(d.jsxs)("h1",{className:x.a["big-title"],children:["Take",Object(d.jsx)("span",{className:x.a["green-title"],children:"Out"})]}),Object(d.jsx)(f,{onClick:e.onShowCart})]}),Object(d.jsx)("div",{className:x.a["main-img"],children:Object(d.jsx)("img",{src:b,alt:"A table full of delicious food"})})]})},v=a(7),N=a.n(v),g=a(13),y=a(2),I=a.n(y),E=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),o=Object(s.a)(r,2),i=o[0],l=o[1];return{isLoading:a,error:i,sendRequest:Object(n.useCallback)(function(){var e=Object(g.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),l(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"GET",headers:t.headers?t.headers:{},body:t.body?t.body:null});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,n.json();case 10:r=e.sent,a(r),c(!1),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("INSIDE CATCH: ",e.t0.message),l(e.t0.message||"Something went wrong"),c(!0);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,a){return e.apply(this,arguments)}}(),[])}},A=a(14),k=a.n(A),T=function(e){return Object(d.jsx)("div",{className:k.a.backdrop,onClick:e.onClose})},R=function(e){return Object(d.jsx)("div",{className:k.a.modal,children:Object(d.jsx)("div",{className:k.a.content,children:e.children})})},F=function(e){var t=document.getElementById("overlays");return Object(d.jsxs)(d.Fragment,{children:[r.a.createPortal(Object(d.jsx)(T,{onClose:e.onClose}),t),r.a.createPortal(Object(d.jsx)(R,{children:e.children}),t)]})},S=a(6),q=a.n(S),w=function(e){var t="$".concat(e.price.toFixed(2));return Object(d.jsxs)("li",{className:q.a["cart-item"],children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:e.name}),Object(d.jsxs)("div",{className:q.a.summary,children:[Object(d.jsxs)("span",{className:q.a.amount,children:[" x ",e.amount]}),Object(d.jsx)("span",{className:q.a.price,children:t})]})]}),Object(d.jsxs)("div",{className:q.a.actions,children:[Object(d.jsx)("button",{className:q.a["dec-button"],onClick:e.onRemove,children:"-"}),Object(d.jsx)("button",{className:q.a["inc-button"],onClick:e.onAdd,children:"+"})]})]})},B=a(4),D=a.n(B),M={value:"",isTouched:!1},V=function(e,t){switch(t.type){case"INPUT":return{value:t.payload,isTouched:e.isTouched};case"BLUR":return{value:e.value,isTouched:!0};case"RESET":return M;default:return e}},L=function(e){var t=Object(n.useReducer)(V,M),a=Object(s.a)(t,2),c=a[0],r=a[1],o=e(c.value),i=c.isTouched&&!o;return{value:c.value,isValid:o,hasError:i,handleValueChange:function(e){r({type:"INPUT",payload:e.target.value})},handleInputBlur:function(){r({type:"BLUR"})},reset:function(){r({type:"RESET"})}}},H=function(e){return""!==e.trim()},P=function(e){return 5===e.trim().length},U=function(e){var t=L(H),a=t.value,n=t.isValid,c=t.hasError,r=t.handleValueChange,s=t.handleInputBlur,o=t.reset,i=L(H),l=i.value,u=i.isValid,j=i.hasError,m=i.handleValueChange,b=i.handleInputBlur,h=i.reset,x=L(H),O=x.value,_=x.isValid,p=x.hasError,f=x.handleValueChange,C=x.handleInputBlur,v=x.reset,N=L(P),g=N.value,y=N.isValid,I=N.hasError,E=N.handleValueChange,A=N.handleInputBlur,k=N.reset,T=n&&u&&_&&y,R="".concat(D.a.control," ").concat(c&&D.a.invalid),F="".concat(D.a.control," ").concat(j&&D.a.invalid),S="".concat(D.a.control," ").concat(p&&D.a.invalid),q="".concat(D.a.control," ").concat(I&&D.a.invalid);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{className:D.a.title,children:"Delivery Address"}),Object(d.jsxs)("form",{className:D.a.form,onSubmit:function(t){t.preventDefault(),T&&(e.onConfirm({name:a.trim(),street:l.trim(),city:O.trim(),zipCode:g.trim()}),o(),h(),v(),k())},children:[Object(d.jsxs)("div",{className:R,children:[Object(d.jsx)("label",{htmlFor:"name",children:"Name"}),Object(d.jsx)("input",{type:"text",id:"name",value:a,onChange:r,onBlur:s}),c&&Object(d.jsx)("p",{children:"Name cannot be empty"})]}),Object(d.jsxs)("div",{className:F,children:[Object(d.jsx)("label",{htmlFor:"street",children:"Street"}),Object(d.jsx)("input",{type:"text",id:"street",value:l,onChange:m,onBlur:b}),j&&Object(d.jsx)("p",{children:"Street cannot be empty"})]}),Object(d.jsxs)("div",{className:S,children:[Object(d.jsx)("label",{htmlFor:"City",children:"City"}),Object(d.jsx)("input",{type:"text",id:"City",value:O,onChange:f,onBlur:C}),p&&Object(d.jsx)("p",{children:"City cannot be empty"})]}),Object(d.jsxs)("div",{className:q,children:[Object(d.jsx)("label",{htmlFor:"zipcode",children:"ZipCode"}),Object(d.jsx)("input",{type:"text",id:"zipcode",value:g,onChange:E,onBlur:A}),I&&Object(d.jsx)("p",{children:"ZIP Code must be valid"})]}),Object(d.jsxs)("div",{className:D.a.actions,children:[Object(d.jsx)("button",{type:"button",className:D.a["button-alt"],onClick:e.onClose,children:"Close"}),Object(d.jsx)("button",{type:"submit",className:D.a.submit,disabled:!T,children:"Confirm"})]})]})]})},z=function(e){var t=Object(n.useContext)(l),a=Object(n.useState)(!1),c=Object(s.a)(a,2),r=c[0],o=c[1],u=Object(n.useState)(!1),j=Object(s.a)(u,2),m=j[0],b=j[1],h=E(),x=h.isLoading,O=h.sendRequest,_="$".concat(t.totalAmount.toFixed(2)),p=!(t.items.length>0),f=function(){var e=Object(g.a)(N.a.mark((function e(a){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!1),n=JSON.stringify({user:a,orderedItems:t.items,totalAmount:t.totalAmount}),c=function(e){console.log("Sucessful!"),console.log(e),t.clearCart()},e.next=5,O({url:"https://react-http-db2d4-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json",method:"POST",headers:{"Content-Type":"application/json"},body:n},c);case 5:b(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(d.jsxs)("div",{className:I.a.actions,children:[Object(d.jsx)("button",{className:I.a["button-alt"],onClick:e.onClose,children:"Close"}),!p&&Object(d.jsx)("button",{className:I.a.button,onClick:function(){o(!0)},children:"Place Order"})]}),v=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{className:I.a.title,children:"Cart Summary"}),Object(d.jsx)("ul",{className:I.a["cart-items"],children:t.items.map((function(e){return Object(d.jsx)(w,{name:e.name,price:e.price,amount:e.amount,onRemove:function(){return a=e.id,void t.removeItem(a);var a},onAdd:function(){return function(e){t.addItem(Object(i.a)(Object(i.a)({},e),{},{amount:1}))}(e)}},e.id)}))})]}),y=Object(d.jsxs)(d.Fragment,{children:[p?Object(d.jsxs)("div",{className:I.a["empty-text"],children:[Object(d.jsx)("h2",{children:"Tasty Food is Cooking"}),Object(d.jsx)("p",{children:"ADD ITEMS TO YOUR CART TO PLACE YOUR ORDER"})]}):v,!p&&Object(d.jsxs)("div",{className:I.a.total,children:[Object(d.jsx)("span",{children:"Total Amount"}),Object(d.jsx)("span",{children:_})]}),!r&&C,r&&Object(d.jsx)(U,{onClose:e.onClose,onConfirm:f})]}),A=Object(d.jsx)("div",{className:I.a["req-text"],children:Object(d.jsx)("h2",{className:I.a["req-text-loading"],children:"SENDING ORDER DATA"})}),k=Object(d.jsxs)("div",{className:I.a["req-text"],children:[Object(d.jsx)("h2",{className:I.a["req-text-success"],children:"SUCCESSFULLY PLACED ORDER!"}),Object(d.jsx)("div",{className:I.a.actions,children:Object(d.jsx)("button",{className:I.a["button-alt"],onClick:e.onClose,children:"Close"})})]}),T=Object(d.jsxs)("div",{className:I.a["req-text"],children:[Object(d.jsx)("h2",{className:I.a["req-text-failure"],children:"REQUEST FAILED"}),Object(d.jsx)("p",{className:I.a["req-text-retry"],children:"Please try again!"}),Object(d.jsx)("div",{className:I.a.actions,children:Object(d.jsx)("button",{className:I.a["button-alt"],onClick:e.onClose,children:"Close"})})]});return Object(d.jsxs)(F,{onClose:e.onClose,children:[!x&&!m&&y,x&&!m&&A,!x&&m&&k,x&&m&&T]})},W=a(18),Z=a.n(W),G=function(){return Object(d.jsx)("section",{className:Z.a.summary,children:Object(d.jsxs)("h2",{children:[Object(d.jsx)("span",{className:Z.a["green-title"],children:"Delicious Food"}),", Delivered to You"]})})},J=a(15),Q=a.n(J),K=a(21),X=a.n(K),Y=function(e){return Object(d.jsx)("div",{className:X.a.card,children:e.children})},$=a(16),ee=a.n($),te=a(22),ae=a.n(te),ne=a(19),ce=a.n(ne),re=Object(n.forwardRef)((function(e,t){return Object(d.jsxs)("div",{className:ce.a.input,children:[Object(d.jsx)("label",{className:ce.a.label,htmlFor:e.input.id,children:e.label}),Object(d.jsx)("input",Object(i.a)({ref:t},e.input))]})}));re.displayName="Button";var se=re,oe=function(e){var t=Object(n.useRef)();return Object(d.jsxs)("form",{className:ae.a.form,onSubmit:function(a){a.preventDefault();var n=parseInt(t.current.value.trim());e.onAddToCart(n)},children:[Object(d.jsx)(se,{ref:t,label:"Amount",input:{id:e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1",required:!0}}),Object(d.jsx)("button",{children:"+ Add"})]})},ie=function(e){var t=Object(n.useContext)(l),a="$".concat(e.price.toFixed(2));return Object(d.jsxs)("li",{className:ee.a["food-item"],children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:e.name}),Object(d.jsx)("div",{className:ee.a.description,children:e.description}),Object(d.jsx)("div",{className:ee.a.price,children:a})]}),Object(d.jsx)("div",{children:Object(d.jsx)(oe,{id:e.id,onAddToCart:function(a){t.addItem({id:e.id,name:e.name,amount:a,price:e.price})}})})]})},le=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],r=E(),o=r.isLoading,l=r.error,u=r.sendRequest;if(Object(n.useEffect)((function(){u({url:"https://react-http-db2d4-default-rtdb.asia-southeast1.firebasedatabase.app/food.json"},(function(e){var t=Object.keys(e).map((function(t){return Object(i.a)({id:t},e[t])}));c(t)}))}),[u]),o)return Object(d.jsx)("section",{className:Q.a["food-loading"],children:Object(d.jsx)("p",{children:"Loading"})});if(l)return Object(d.jsx)("section",{className:Q.a["food-error"],children:Object(d.jsx)("p",{children:l})});var j=a.map((function(e){return Object(d.jsx)(ie,{id:e.id,name:e.name,description:e.description,price:e.price},e.id)}));return Object(d.jsx)("section",{className:Q.a.food,children:Object(d.jsx)(Y,{children:Object(d.jsx)("ul",{children:j})})})},de=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G,{}),Object(d.jsx)(le,{})]})},ue=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(d.jsxs)(m,{children:[a&&Object(d.jsx)(z,{onClose:function(){c(!1)}}),Object(d.jsx)(C,{onShowCart:function(){c(!0)}}),Object(d.jsx)("main",{children:Object(d.jsx)(de,{})})]})};r.a.render(Object(d.jsx)(n.StrictMode,{children:Object(d.jsx)(ue,{})}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.7c43c688.chunk.js.map